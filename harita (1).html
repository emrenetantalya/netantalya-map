<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
html, body, #map {
height: 100%;
margin: 0;
padding: 0;
}
</style>
</head>
<body>
<div id="map">Harita yükleniyor...</div>

<script>
let map;
let marker;

function initMap(lat, lng) {
const position = { lat: lat, lng: lng };
map = new google.maps.Map(document.getElementById("map"), {
zoom: 15,
center: position
});
marker = new google.maps.Marker({
position: position,
map: map
});
}

function getCoordinatesFromURL() {
const params = new URLSearchParams(window.location.search);
const msg = params.get('msg');
if (msg) {
try {
const data = JSON.parse(decodeURIComponent(msg));
const lat = parseFloat(data.lat);
const lng = parseFloat(data.lng);
if (!isNaN(lat) && !isNaN(lng)) {
initMap(lat, lng);
} else {
console.warn("Geçersiz koordinatlar:", data);
}
} catch (e) {
console.error("JSON parse hatası:", e);
}
} else {
console.warn("Koordinat parametresi bulunamadı, varsayılan Antalya gösteriliyor.");
initMap(36.8969, 30.7133); // Varsayılan Antalya
}
}

window.onload = getCoordinatesFromURL;
</script>

<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAERog0p0vVyFaG-NfmjZAxZYRu2PlaMeY">
</script>
</body>
</html>
