<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
html, body, #map { height: 100%; margin: 0; padding: 0; }
#inputs { margin-top: 10px; font-family: Arial, sans-serif; display: none; }
#inputs label { display: block; margin-bottom: 5px; }
#inputs input { width: 100%; padding: 5px; margin-bottom: 10px; box-sizing: border-box; }
</style>
</head>
<body>
<div id="map">Harita yükleniyor...</div>

<!-- Enlem ve boylam inputları -->
<div id="inputs">
<label>Enlem (Latitude):</label>
<input type="text" id="latInput" readonly>

<label>Boylam (Longitude):</label>
<input type="text" id="lngInput" readonly>
</div>

<script>
let map;
let marker;

// URL parametresi ile inputları göster/gizle
const urlParams = new URLSearchParams(window.location.search);
const showInputs = urlParams.get('showInputs') === 'true';
if(showInputs) document.getElementById('inputs').style.display = 'block';

function initMap() {
const defaultPos = { lat: 36.8969, lng: 30.7133 }; // Antalya varsayılan
map = new google.maps.Map(document.getElementById("map"), {
zoom: 13,
center: defaultPos
});

marker = new google.maps.Marker({
position: defaultPos,
map: map
});

map.addListener("click", function(event) {
const lat = event.latLng.lat();
const lng = event.latLng.lng();
marker.setPosition(event.latLng);

// Inputlara yaz (sadece showInputs=true ise)
if(showInputs){
document.getElementById("latInput").value = lat.toFixed(6);
document.getElementById("lngInput").value = lng.toFixed(6);
}

// Üst sayfaya gönder (Velo)
window.parent.postMessage({ lat: lat, lng: lng }, "*");
});
}
</script>

<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAERog0p0vVyFaG-NfmjZAxZYRu2PlaMeY&callback=initMap">
</script>
</body>
</html>
